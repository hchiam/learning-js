<!DOCTYPE html>
<html>
  <head>
    <title>postMessage demo - parent</title>
    <meta charset="utf-8" />
    <script>
      let popup;
      const childName = "popup";
      const popupUrl = "Page2.html";

      function openChild() {
        popup = window.open(popupUrl, childName, "height=300px, width=500px");
      }

      function sendMessage() {
        let msg = { pName: "Bob", pAge: "100" };
        const targetDomain = "*";
        // In production, DO NOT use '*', use toe target domain
        popup.postMessage(msg, targetDomain); // popup is the targetWindow
        popup.focus();
      }
    </script>
  </head>
  <body>
    <form>
      <fieldset>
        <input
          type="button"
          id="btnopen"
          value="Open child"
          onclick="openChild();"
        />
        <input
          type="button"
          id="btnSendMsg"
          value="Send Message"
          onclick="sendMessage();"
        />
      </fieldset>
    </form>
  </body>
</html>
